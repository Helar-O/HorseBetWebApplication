/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
drop table if exists bet CASCADE 
drop table if exists horse CASCADE 
drop table if exists participant CASCADE 
drop table if exists race CASCADE 
drop table if exists user CASCADE 
create table bet (bet_id integer generated by default as identity (start with 1), participant_id integer not null, user_id integer not null, primary key (bet_id))
create table horse (horse_id integer generated by default as identity (start with 1), name varchar(255) not null, user_id integer not null, primary key (horse_id))
create table participant (participant_id integer generated by default as identity (start with 1), color varchar(255) not null, horse_id integer not null, race_id integer not null, primary key (participant_id))
create table race (race_id integer generated by default as identity (start with 1), date date not null, place varchar(255) not null, time time not null, horse_id integer, primary key (race_id))
create table user (user_id integer generated by default as identity (start with 1), password varchar(255) not null, username varchar(255) not null, primary key (user_id))
alter table bet add constraint FK1ffylqo4xr2fhu6log0jrphkq foreign key (participant_id) references participant on delete cascade
alter table bet add constraint FK5lxp96uxbvhn0q54fttc8jc2d foreign key (user_id) references user
alter table horse add constraint FK4m6m67nxr0d1hsfa5k7brgtba foreign key (user_id) references user
alter table participant add constraint FKhra7vhgnb35nb1bgl7jsj47sf foreign key (horse_id) references horse on delete cascade
alter table participant add constraint FK71vjvrnsuq2q0b4ya7osm6ww7 foreign key (race_id) references race
alter table race add constraint FKpt7iwvgeckquebc53p3gqnp3n foreign key (horse_id) references horse
DISCONNECT
